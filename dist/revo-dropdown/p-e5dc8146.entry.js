import{h as t,r as i,c as e,H as o}from"./p-6d6d234b.js";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){let i=this;do{if(Element.prototype.matches.call(i,t))return i;i=i.parentElement||i.parentNode}while(null!==i&&1===i.nodeType);return null});const s="uuid";function r(t,i){return t?i?t[i]:t:""}function n(t,i){return i?t[i]:t}const l=i=>{const e=t=>{const e=function(t,i){var e;let o=[];const s=null===(e=null==i?void 0:i.trim())||void 0===e?void 0:e.toLocaleLowerCase();if(s)for(let i of t.source){let e=r(i,t.dataLabel);"string"==typeof e&&(e=e.toLocaleLowerCase(),"start"===t.filter?0===e.indexOf(s)&&o.push(i):e.indexOf(s)>-1&&o.push(i))}else o=t.source;return o}(i,t);i.onFilterChange({value:t,items:e})};return i.filter||(i.filter="contains"),e(i.filterValue),i.autocomplete&&(i.value=i.filterValue),t("input",Object.assign({class:{"filter-box":!0},type:"text"},i,{onClick:t=>{t.preventDefault(),i.onClick&&i.onClick(t)},onInput:t=>{var o;i.onInput&&i.onInput();const s=null===(o=t.currentTarget)||void 0===o?void 0:o.value;e(s)}}))},a=()=>t("span",{class:"arrow-wrapper"},t("svg",{class:"arrow","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},t("path",{fill:"currentColor",d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}))),d=class{constructor(t){i(this,t),this.changeValue=e(this,"changed",7),this.close=e(this,"close",7),this.open=e(this,"open",7),this.uuid="",this.isClosing=!1,this.currentItem=null,this.isVisible=!1,this.dataLabel=void 0,this.value=void 0,this.currentFilter=void 0,this.dataId=void 0,this.autoClose=!0,this.source=[],this.appendSource=[],this.placeholder="Select",this.appendTo="body",this.filter=void 0,this.maxHeight=void 0,this.hasFilter=!0,this.multiple=!1,this.autocomplete=!1,this.autoFocus=!1}async doClose(t=!1){!t&&this.close.emit().defaultPrevented||(this.isClosing=!0,this.isVisible=!1)}async doOpen(){this.open.emit().defaultPrevented||(this.isVisible=!0)}async doChange(t,i){const e=n(t,this.dataId);if(this.multiple){let t=[...this.value||[]];Array.isArray(this.value)?t.push(e):t=[e],this.value=t}else this.value=e;this.changeValue.emit({val:this.value,originalEvent:i}),this.autocompleteInput&&(this.autocompleteInput.value=this.multiple?"":r(this.currentItem,this.dataLabel)),this.autoClose&&this.isVisible&&this.doClose()}onMouseUp(t){var i;this.isVisible&&!t.defaultPrevented&&!(null===(i=t.target)||void 0===i?void 0:i.closest(`[${s}="${this.uuid}"]`))&&this.doClose()}onKey(t){"Escape"===t.code&&(t.preventDefault(),this.doClose())}onValueChanged(t){this.currentItem=Array.isArray(t)?t.map((t=>this.getValue(t))):this.getValue(t)}componentWillLoad(){this.value&&(this.currentItem=this.value)}connectedCallback(){this.uuid=`${this.uuidv4((new Date).getTime())}-rvdropdown`,void 0!==this.value&&this.onValueChanged(this.value)}disconnectedCallback(){this.doClose(!0)}componentDidRender(){this.dropdown&&"body"===this.appendTo&&document.body.appendChild(this.dropdown),this.isVisible&&this.updateStyles(),this.dropdownInput&&this.dropdownInput.focus(),this.autoFocus&&this.autocomplete&&setTimeout((()=>{var t;return null===(t=this.autocompleteInput)||void 0===t?void 0:t.focus()}),0)}getSelectedItemLabel(t){return t&&r(t,this.dataLabel)||""}renderDropdown(){return t("div",{class:"revo-dropdown-list",ref:t=>this.dropdown=t},t("div",Object.assign({},{[s]:this.uuid},{class:"dropdown-inner",ref:t=>this.dropdownInner=t}),this.hasFilter&&!this.autocomplete?t(l,{ref:t=>this.dropdownInput=t,source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:this.currentFilter||"",filterValue:this.currentFilter||"",onFilterChange:t=>{var i;this.currentFilter=t.value,this.currentSource=t.items.concat(this.appendSource),null===(i=this.revoList)||void 0===i||i.refresh(this.currentSource)}}):void 0,t("revo-list",{ref:t=>this.revoList=t,isFocused:!0,sourceItems:this.currentSource,dataLabel:this.dataLabel,onChanged:t=>this.doChange(t.detail.item,t.detail.e)})))}deselect(t){if(Array.isArray(this.currentItem)){const i=[...this.currentItem];delete i[t],this.currentItem=[...i].filter((t=>t))}}renderSelect(){const i=this.multiple?"":this.getSelectedItemLabel(this.currentItem);return t("input",{type:"text",disabled:!0,class:"filter-box",value:i})}renderAutocomplete(){const i=this.multiple?"":this.getSelectedItemLabel(this.currentItem);return t(l,{ref:t=>this.autocompleteInput=t,autocomplete:"true",source:this.source,filter:this.filter,dataLabel:this.dataLabel,value:i,filterValue:this.currentFilter,onKeyDown:t=>{if(!this.isVisible)switch(t.code){case"ArrowUp":case"ArrowDown":t.preventDefault(),this.showAutoComplete()}},onInput:()=>this.showAutoComplete(),onFocus:()=>this.showAutoComplete(),onClick:()=>this.showAutoComplete(),onFilterChange:t=>{var i;this.currentFilter=t.value,this.currentSource=t.items.concat(this.appendSource),null===(i=this.revoList)||void 0===i||i.refresh(this.currentSource)}})}renderDeselectIcon(){return t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},t("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"}))}renderMultiselected(){let i=[];if(Array.isArray(this.currentItem)&&(i=[...this.currentItem]),i.length)return t("div",null,this.currentItem.map(((i,e)=>t("button",{style:{"margin-left":e>0?"2px":""},onClick:t=>{t.stopPropagation(),this.deselect(e)}},t("span",{style:{"margin-right":"5px"}},this.getSelectedItemLabel(i)),t("span",{style:{cursor:"pointer"}},this.renderDeselectIcon())))))}render(){var i;let e;this.isVisible&&(e=this.renderDropdown());const r={[s]:this.uuid,class:{active:this.isVisible,shrink:this.isVisible||!!this.currentItem||!!(null===(i=this.autocompleteInput)||void 0===i?void 0:i.value)},ref:t=>this.element=t,onClick:t=>this.selectClick(t)};return this.autocomplete&&(r.autocomplete=!0),t(o,Object.assign({},r),t("label",null,this.placeholder),t("div",{class:"rv-dr-root"},this.multiple&&this.renderMultiselected(),this.autocomplete?this.renderAutocomplete():this.renderSelect(),t("span",{class:"actions"},t(a,null)),t("fieldset",null,t("legend",null,t("span",null,this.placeholder)))),e)}showAutoComplete(){this.isVisible||this.isClosing||(this.isVisible=!0),this.isClosing=!1}getValue(t){for(let i in this.source){const e=this.source[i];if(t==n(e,this.dataId))return e}return null}selectClick(t){t.defaultPrevented||(this.isVisible?this.doClose():this.doOpen())}updateStyles(){if(!this.dropdown)return;const{top:t,left:i,height:e}=this.element.getBoundingClientRect(),o=this.clientRectangle();let s=t+e+o.top;const r={opacity:1,display:"block"};s>o.centerY?(r.top=s-e+"px",r.maxHeight=s-e-o.top-50,this.dropdown.classList.add("top")):(r.top=`${s}px`,r.maxHeight=o.bottom-s-50,this.dropdown.classList.remove("top"));let n=i+o.left;const l=o.right-(n+this.dropdown.clientWidth);l<0&&(n+=l),r.left=`${n}px`,this.dropdownInner.style.maxHeight=`${Math.min(r.maxHeight,this.maxHeight||r.maxHeight)}px`,this.dropdownInner.style.maxWidth=r.maxWidth;for(let t in r)this.dropdown.style[t]=r[t]}clientRectangle(){const t={top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,bottom:0,centerY:0,height:document.body.clientHeight,left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,right:0,width:document.body.clientWidth,centerX:0};return t.bottom=t.top+t.height,t.right=t.left+t.width,t.centerY=t.top+t.height/2,t.centerX=t.left+t.width/2,t}uuidv4(t){return`${t}-xx-y`.replace(/[xy]/g,(t=>{var i=16*Math.random()|0;return("x"==t?i:3&i|8).toString(16)}))}static get watchers(){return{value:["onValueChanged"]}}};d.style='revo-dropdown{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;vertical-align:top;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}revo-dropdown .rv-dr-root{padding:5px 9px;padding-right:35px;-ms-flex-wrap:wrap;flex-wrap:wrap;position:relative;border-radius:4px;cursor:text;display:-ms-inline-flexbox;display:inline-flex;position:relative;font-size:1rem;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex-align:center;align-items:center}revo-dropdown input.filter-box{padding-left:6px;padding:9.5px 4px;width:0;min-width:30px;-ms-flex-positive:1;flex-grow:1;text-overflow:ellipsis;border:0;height:1.1876em;margin:0;display:block;background:none;-webkit-box-sizing:content-box;box-sizing:content-box;letter-spacing:inherit;-webkit-animation-duration:10ms;animation-duration:10ms}revo-dropdown input.filter-box:focus{outline:none}revo-dropdown .actions{right:9px;top:calc(50% - $font-size);position:absolute}revo-dropdown label{font-size:1rem;z-index:100;top:0;left:0;position:absolute;display:block;-webkit-transform-origin:top left;transform-origin:top left;line-height:1;-webkit-transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:color 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms, -webkit-transform 200ms cubic-bezier(0, 0, 0.2, 1) 0ms;-webkit-transform:translate(14px, 14px) scale(1);transform:translate(14px, 14px) scale(1);pointer-events:none}revo-dropdown fieldset{border-color:#ececec;top:-5px;left:0;right:0;bottom:0;margin:0;padding:0 8px;overflow:hidden;position:absolute;z-index:0;border-style:solid;border-width:1px;border-radius:inherit;pointer-events:none}revo-dropdown fieldset legend{width:auto;height:11px;display:block;padding:0;font-size:0.75em;max-width:0.01px;text-align:left;-webkit-transition:max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;transition:max-width 50ms cubic-bezier(0, 0, 0.2, 1) 0ms;visibility:hidden}revo-dropdown fieldset legend>span{display:inline-block;padding-left:5px;padding-right:5px}revo-dropdown.shrink label{-webkit-transform:translate(14px, -6px) scale(0.75);transform:translate(14px, -6px) scale(0.75)}revo-dropdown.shrink legend{max-width:1000px;-webkit-transition:max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms;transition:max-width 100ms cubic-bezier(0, 0, 0.2, 1) 50ms}revo-dropdown .arrow{width:9px;margin-top:5px;margin-left:5px;opacity:0.4}revo-dropdown .arrow-wrapper{width:15px;text-align:center}revo-dropdown.active label{color:#0089ff}revo-dropdown.active fieldset{border-color:#0089ff}.revo-dropdown-list{font-size:1em;font-family:"Roboto", "Helvetica", "Arial", sans-serif;font-weight:400;line-height:2em;letter-spacing:0.01em;position:absolute;-webkit-transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:opacity 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, -webkit-transform 160ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;z-index:999;display:none;opacity:0}.revo-dropdown-list.top .dropdown-inner{bottom:2px;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.revo-dropdown-list.top .dropdown-inner .filter-box{margin-bottom:0}.revo-dropdown-list:not(.top) .dropdown-inner{top:2px;-ms-flex-direction:column;flex-direction:column}.revo-dropdown-list:not(.top) .dropdown-inner .filter-box{margin-top:0}.revo-dropdown-list .dropdown-inner{display:-ms-flexbox;display:flex;max-height:100%;position:absolute;padding:8px 0;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:16px;min-width:16px;-webkit-box-shadow:0 0 14px 0 rgba(53, 64, 82, 0.05);box-shadow:0 0 14px 0 rgba(53, 64, 82, 0.05);border:1px solid rgba(0, 0, 0, 0.05);border-radius:4px;color:rgba(0, 0, 0, 0.87);overflow:hidden;background-color:#fff}.revo-dropdown-list .dropdown-inner .filter-box{border:1px solid #ececec;min-height:30px;line-height:30px;margin:10px;border-radius:6px}.revo-dropdown-list .dropdown-inner .filter-box:focus{outline:none;border-color:#0089ff}';const h=class{constructor(t){i(this,t),this.changed=e(this,"changed",3),this.currentItem=0,this.sourceItems=[],this.isFocused=!1,this.dataLabel=void 0}onKey(t){let i;if(this.isFocused)switch(t.code){case"ArrowUp":if(t.preventDefault(),this.currentItem<=0)return;this.currentItem--;break;case"ArrowDown":t.preventDefault(),this.sourceItems[this.currentItem+1]&&this.currentItem++;break;case"Tab":case"Enter":t.preventDefault(),i=this.sourceItems[this.currentItem],i&&this.changed.emit({item:i,e:t})}}async refresh(t){this.sourceItems=t}componentDidRender(){var t;null===(t=this.selectedEl)||void 0===t||t.scrollIntoView({block:"nearest",inline:"nearest"})}render(){this.selectedEl=void 0;const i=[];for(let e in this.sourceItems){const o=this.sourceItems[e],s=parseInt(e)===this.currentItem,n=t("li",Object.assign({},{class:{selected:s},ref:t=>{s&&(this.selectedEl=t)},onClick:t=>this.changed.emit({item:o,e:t})}),r(o,this.dataLabel));i.push(n)}return t("ul",null,i)}};h.style="revo-list{overflow-x:hidden;overflow-y:auto;max-height:100%;display:block}revo-list ul{margin:0;padding:0;outline:0;list-style:none}revo-list ul>li{width:auto;overflow:hidden;font-size:14px;-webkit-box-sizing:border-box;box-sizing:border-box;min-height:48px;font-weight:400;line-height:1.5;padding-top:6px;white-space:nowrap;padding-bottom:6px;padding-left:16px;padding-right:16px;display:-ms-flexbox;display:flex;position:relative;text-align:left;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;text-decoration:none;cursor:pointer}revo-list ul>li.selected{background-color:rgba(0, 0, 0, 0.04)}revo-list ul>li:hover{background-color:rgba(0, 0, 0, 0.04)}";export{d as revo_dropdown,h as revo_list}